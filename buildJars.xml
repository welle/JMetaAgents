<?xml version="1.0"?>
<project name="JMetaagents Jars" default="runBuildJars" basedir=".">

    <target name="runBuildJars" depends="chkProps, fail" unless="missingProp">
        <echo message="Build jars..."/>
        <antcall target="allJars" />
    </target>

    <target name="chkProps">
        <property name="chk0" value="$${classes}"/>
        <property name="chk1" value="$${jars_dest}"/>
        <condition property="missingProp">
            <or>
                <equals arg1="${chk0}" arg2="${classes}"/>
                <equals arg1="" arg2="${classes}"/>
                <equals arg1="${chk1}" arg2="${jars_dest}"/>
                <equals arg1="" arg2="${jars_dest}"/>
            </or>
        </condition>
    </target>
    
    <target name="fail" if="missingProp">
        <fail message="missing property(ies) : classes, jars_dest"/>
    </target>

	<property name="project" value="JMetaagents"/>	
	<property name="pkg_base" value="aka"/>	

    <property name="target.managers" value="${jars_dest}"/>
    <property name="target.applications" value="${jars_dest}"/>

    <target name="cleanJars">
        <delete dir="${jars_dest}" />
    </target>
    
    <target name="allJars" depends="jar"/>

    <target name="jar">
        <echo message="Building : JMetaagents" />
        
        <tstamp>
            <format property="TODAY_UK" pattern="yyyy-MM-dd HH:mm" locale="en,UK"/>
        </tstamp>
        
        <jar jarfile="${target.applications}/build/${project}-${version}.jar" basedir="${classes}"
             includes="${pkg_base}/**" 
             excludes="${pkg_base}/**/*_JUnitTest.*">
                
            <manifest>
                <attribute name="version" value="${version}" />
                <attribute name="time" value="${TODAY_UK}" />
            </manifest>
        </jar>
    </target>
	
    <target name="allocine jar">
        <echo message="Building : JMetaagents Allocine" />
        
        <tstamp>
            <format property="TODAY_UK" pattern="yyyy-MM-dd HH:mm" locale="en,UK"/>
        </tstamp>
        
        <jar jarfile="${target.applications}/build/${project}Allocine-${version}.jar" basedir="${classes}"
             includes="${pkg_base}/**" 
             excludes="${pkg_base}/**/*_JUnitTest.*, ${pkg_base}/**/jimdb/**, ${pkg_base}/**/jtvdb/**, ${pkg_base}/**/jtmdb/**, ${pkg_base}/**/jrottentomatoes/**, ${pkg_base}/**/constantstests/**">
                
            <manifest>
                <attribute name="version" value="${version}" />
                <attribute name="time" value="${TODAY_UK}" />
            </manifest>
        </jar>
    </target>
	
    <target name="jtmdb jar">
        <echo message="Building : JMetaagents JTMDB" />
        
        <tstamp>
            <format property="TODAY_UK" pattern="yyyy-MM-dd HH:mm" locale="en,UK"/>
        </tstamp>
        
        <jar jarfile="${target.applications}/build/${project}TMDB-${version}.jar" basedir="${classes}"
             includes="${pkg_base}/**" 
             excludes="${pkg_base}/**/*_JUnitTest.*, ${pkg_base}/**/jimdb/**, ${pkg_base}/**/jtvdb/**, ${pkg_base}/**/jallocine/**, ${pkg_base}/**/jrottentomatoes/**, ${pkg_base}/**/constantstests/**">
                
            <manifest>
                <attribute name="version" value="${version}" />
                <attribute name="time" value="${TODAY_UK}" />
            </manifest>
        </jar>
    </target>
	
    <target name="jrottentomatoes jar">
        <echo message="Building : JMetaagents JRottenTomatoes" />
        
        <tstamp>
            <format property="TODAY_UK" pattern="yyyy-MM-dd HH:mm" locale="en,UK"/>
        </tstamp>
        
        <jar jarfile="${target.applications}/build/${project}RottenTomatoes-${version}.jar" basedir="${classes}"
             includes="${pkg_base}/**" 
             excludes="${pkg_base}/**/*_JUnitTest.*, ${pkg_base}/**/jimdb/**, ${pkg_base}/**/jtvdb/**, ${pkg_base}/**/jallocine/**, ${pkg_base}/**/jtmdb/**, ${pkg_base}/**/constantstests/**">
                
            <manifest>
                <attribute name="version" value="${version}" />
                <attribute name="time" value="${TODAY_UK}" />
            </manifest>
        </jar>
    </target>
	
    <target name="jimdb jar">
        <echo message="Building : JMetaagents JIMDB" />
        
        <tstamp>
            <format property="TODAY_UK" pattern="yyyy-MM-dd HH:mm" locale="en,UK"/>
        </tstamp>
        
        <jar jarfile="${target.applications}/build/${project}IMDB-${version}.jar" basedir="${classes}"
             includes="${pkg_base}/**" 
             excludes="${pkg_base}/**/*_JUnitTest.*, ${pkg_base}/**/jrottentomatoes/**, ${pkg_base}/**/jtvdb/**, ${pkg_base}/**/jallocine/**, ${pkg_base}/**/jtmdb/**, ${pkg_base}/**/constantstests/**">
                
            <manifest>
                <attribute name="version" value="${version}" />
                <attribute name="time" value="${TODAY_UK}" />
            </manifest>
        </jar>
    </target>
    
	
    <target name="jtvdb jar">
        <echo message="Building : JMetaagents JTVDB" />
        
        <tstamp>
            <format property="TODAY_UK" pattern="yyyy-MM-dd HH:mm" locale="en,UK"/>
        </tstamp>
        
        <jar jarfile="${target.applications}/build/${project}TVDB-${version}.jar" basedir="${classes}"
             includes="${pkg_base}/**" 
             excludes="${pkg_base}/**/*_JUnitTest.*, ${pkg_base}/**/jrottentomatoes/**, ${pkg_base}/**/jimdb/**, ${pkg_base}/**/jallocine/**, ${pkg_base}/**/jtmdb/**, ${pkg_base}/**/constantstests/**">
                
            <manifest>
                <attribute name="version" value="${version}" />
                <attribute name="time" value="${TODAY_UK}" />
            </manifest>
        </jar>
    </target>
    
</project>
